file_path,api_count,code
postgen_script.py,0,"b'""""""Add link to Google Colab for each notebook\n\nRipped from https://github.com/jakevdp/PythonDataScienceHandbook/blob/master/tools/add_navigation.py\n""""""\n\nimport os\nimport glob\nimport nbformat\nfrom nbformat.v4.nbbase import new_markdown_cell\n\nROOT_DIR = os.path.dirname(os.path.abspath(__file__))\n\n\ndef iter_notebooks():\n    """"""Returns notebook files in all subdirectories""""""\n\n    return (\n        filename for filename in glob.iglob(ROOT_DIR + ""**/**/*.ipynb"", recursive=True)\n    )\n\n\nLINK_COMMENT = ""<!--NAVIGATION-->\\n""\n\nCOLAB_LINK = """"""\n<a target=""_blank"" href=""https://colab.research.google.com/github/bpesquet/machine-learning-handbook/blob/master/{notebook_filename}""><img align=""left"" src=""https://colab.research.google.com/assets/colab-badge.svg"" alt=""Open in Colab"" title=""Open in Google Colaboratory""></a>\n""""""\n\n\ndef iter_links():\n    """"""Returns paths to notebooks and HTML link to Google Colab for each of them""""""\n\n    for nb_path in iter_notebooks():\n        link = LINK_COMMENT\n        link += COLAB_LINK.format(notebook_filename=os.path.relpath(nb_path))\n        yield os.path.join(ROOT_DIR, nb_path), link\n\n\ndef write_links():\n    """"""Add or update a cell in each notebook with a Google Colab link""""""\n\n    for nb_name, link in iter_links():\n        notebook = nbformat.read(nb_name, as_version=4)\n        nb_file = os.path.basename(nb_name)\n        is_comment = lambda cell: cell.source.startswith(LINK_COMMENT)\n\n        if is_comment(notebook.cells[0]):\n            print(""Amending link for {0}"".format(nb_file))\n            notebook.cells[0].source = link\n        else:\n            print(""Inserting link for {0}"".format(nb_file))\n            notebook.cells.insert(0, new_markdown_cell(source=link))\n\n        nbformat.write(notebook, nb_name)\n\n\nif __name__ == ""__main__"":\n    write_links()\n'"
