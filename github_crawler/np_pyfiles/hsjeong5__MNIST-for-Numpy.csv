file_path,api_count,code
mnist.py,2,"b'import numpy as np\nfrom urllib import request\nimport gzip\nimport pickle\n\nfilename = [\n[""training_images"",""train-images-idx3-ubyte.gz""],\n[""test_images"",""t10k-images-idx3-ubyte.gz""],\n[""training_labels"",""train-labels-idx1-ubyte.gz""],\n[""test_labels"",""t10k-labels-idx1-ubyte.gz""]\n]\n\ndef download_mnist():\n    base_url = ""http://yann.lecun.com/exdb/mnist/""\n    for name in filename:\n        print(""Downloading ""+name[1]+""..."")\n        request.urlretrieve(base_url+name[1], name[1])\n    print(""Download complete."")\n\ndef save_mnist():\n    mnist = {}\n    for name in filename[:2]:\n        with gzip.open(name[1], \'rb\') as f:\n            mnist[name[0]] = np.frombuffer(f.read(), np.uint8, offset=16).reshape(-1,28*28)\n    for name in filename[-2:]:\n        with gzip.open(name[1], \'rb\') as f:\n            mnist[name[0]] = np.frombuffer(f.read(), np.uint8, offset=8)\n    with open(""mnist.pkl"", \'wb\') as f:\n        pickle.dump(mnist,f)\n    print(""Save complete."")\n\ndef init():\n    download_mnist()\n    save_mnist()\n\ndef load():\n    with open(""mnist.pkl"",\'rb\') as f:\n        mnist = pickle.load(f)\n    return mnist[""training_images""], mnist[""training_labels""], mnist[""test_images""], mnist[""test_labels""]\n\nif __name__ == \'__main__\':\n    init()\n'"
