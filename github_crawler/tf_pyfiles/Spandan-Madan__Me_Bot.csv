file_path,api_count,code
clean_wechat_chats.py,0,"b""import os\nimport pickle\nimport sqlite3\nimport sys\n\nchat_db_file = sys.argv[1]\nfriend_id = sys.argv[2]\nconn = sqlite3.connect(chat_db_file)\ncursor = conn.cursor()\ncursor.execute('select CreateTime, Message, Status, Type from ' + friend_id)\ncontent = cursor.fetchall()\nall_text = []\nyour_sents = []\nother_sents = []\n\nprev_pr_to_sp = {}\nprev = None\nfor line in content:\n    createTime = line[0]\n    message = line[1]  # 'message content'\n    status = line[2]  # 'status=2  or 3 means message from yourself from phone or computer, status=4 or 5  means message from other'\n    type_ = line[3]  # 'type = 1 means text message, type = 47 mean emoji (not sure ), type=10000 means  link(not sure)''\n    # print(message)\n    # print(status)\n\n\n    if type_ !=1:\n        continue\n    if status == 2 or status == 3:\n        your_sents.append(message)\n        all_text.append(message)\n        if prev == 'None':\n            continue\n        if prev == 'pr':\n            prev_pr_to_sp[other_sents[-1]] = message\n        prev = 'sp'\n    elif status == 4 or status == 5:\n        other_sents.append(message)\n        all_text.append(message)\n        prev = 'pr'\n    else:\n        print(line)\n        all_text[-1] += message\n        if prev == 'sp':\n            your_sents[-1] += message\n        elif prev == 'pr':\n            other_sents[-1] += message\n\nif not os.path.isdir('res/wechat'):\n    if not os.path.isdir('res'):\n        os.mkdir('res')\n    os.mkdir('res/wechat')\n\n\nf = open('res/wechat/dilogues.p', 'wb')\npickle.dump(prev_pr_to_sp, f)\nf.close()\n\nf = open('res/wechat/all_text.p', 'wb')\npickle.dump(all_text, f)\nf.close()\n\nf = open('res/wechat/your_sents.p', 'wb')\npickle.dump(your_sents, f)\nf.close()\n\nf = open('res/wechat/other_sents.p', 'wb')\npickle.dump(other_sents, f)\nf.close()\n"""
clean_whatsapp_chats.py,0,"b'import pickle\nimport random\nimport sys\nimport os\nchat_file = sys.argv[1]\n\nf = open(chat_file,\'r\', encoding=""utf8"")\ncontent = f.readlines()\nall_text = []\nyour_sents = []\nother_sents = []\n\nYOUR_NAME = \'YOUR NAME HERE\'\nOTHER_NAME = \'OTHER NAME HERE\'\n\nprev_pr_to_sp = {}\nprev = None\nfor line in content[1:]:\n\tif \'Missed Voice Call\' in line:\n\t\tcontinue\n\tif \'image omitted\' in line:\n\t\tcontinue\n\tif \' %s: \'%YOUR_NAME in line:\n\t\ttext = line.split(\' %s: \'%YOUR_NAME)[-1]\n\t\tyour_sents.append(text)\n\t\tall_text.append(text)\n\t\tif prev == \'None\':\n\t\t\tcontinue\n\t\tif prev == \'pr\':\n\t\t\tprev_pr_to_sp[other_sents[-1]] = text\n\t\tprev = \'sp\'\n\telif \' %s: \'%OTHER_NAME in line:\n\t\ttext = line.split(\' %s: \'%OTHER_NAME)[-1]\n\t\tother_sents.append(text)\n\t\tall_text.append(text)\n\t\tprev = \'pr\'\n\telse:\n\t\tprint(line)        \n\t\tall_text[-1] += line\n\n\t\tif prev == \'sp\':\n\t\t\tyour_sents[-1] += line\n\t\telif prev == \'pr\':\n\t\t\tother_sents[-1] += line\n\nif not os.path.isdir(\'res/whatsapp\'):\n\tif not os.path.isdir(\'res\'):\n\t\tos.mkdir(\'res\')\n\tos.mkdir(\'res/whatsapp\')\n\n\nf = open(\'res/whatsapp/dilogues.p\', \'wb\')\npickle.dump(prev_pr_to_sp, f)\nf.close()\n\nf = open(\'res/whatsapp/all_text.p\', \'wb\')\npickle.dump(all_text, f)\nf.close()\n\nf = open(\'res/whatsapp/your_sents.p\', \'wb\')\npickle.dump(your_sents, f)\nf.close()\n\nf = open(\'res/whatsapp/other_sents.p\', \'wb\')\npickle.dump(other_sents, f)\nf.close()\n'"
