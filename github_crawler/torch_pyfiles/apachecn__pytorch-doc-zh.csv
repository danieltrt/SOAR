file_path,api_count,code
src/script.py,0,"b'# coding: utf-8\nimport os\nimport sys\n\n\ndef format_file(filename, str1, str2):\n    """"""\n    \xe6\x96\x87\xe4\xbb\xb6\xe5\x86\x85\xe5\xae\xb9\xe7\x9a\x84\xe6\x9b\xbf\xe6\x8d\xa2\xe5\x8a\x9f\xe8\x83\xbd\n    :return:\n    """"""\n    with open(filename, \'r\') as f:\n        var_object = f.read()\n        if ""gitalk"" not in var_object:\n            var_object = var_object.replace(str1, str2)\n        # print(var_object)\n\n    f = open(filename, ""w"")\n    f.write(var_object)\n\n\nif __name__ == ""__main__"":\n    if len(sys.argv) == 3:\n        version, u_type = sys.argv[1], sys.argv[2]\n    else:\n        print(""Usage: \xe5\x8f\x82\xe6\x95\xb0\xe4\xb8\xaa\xe6\x95\xb0\xe4\xb8\xba%s - \xe9\x94\x99\xe8\xaf\xaf\xef\xbc\x8c\xe5\xba\x94\xe8\xaf\xa5\xe6\x94\xb9\xe4\xb8\xba3"" % len(sys.argv))\n        sys.exit(-1)\n\n    tag = True\n    if u_type == ""index"":\n        tag = False\n        # if version == ""home"":\n        #     filename = ""_book/index.html""\n        # else:\n        #     filename = ""_book/docs/%s/index.html"" % version\n        # str1 = """"""\n        # </head>\n        # <body>\n        # """"""\n\n        # str2 = """"""\n        # <script type=""text/javascript"">\n        #     function hidden_left(){\n        #         document.getElementsByClassName(""btn pull-left js-toolbar-action"")[0].click()\n        #     }\n        #     // window.onload = hidden_left();\n        # </script>\n        # </head>\n        # <body onload=""hidden_left()"">\n        # """"""\n    elif u_type == ""book"":\n        if version == ""home"":\n            filename = ""book.json""\n            tag = False\n        else:\n            filename = ""docs/%s/book.json"" % version\n            str1 = ""https://github.com/apachecn/pytorch-doc-zh/blob/master""\n            str2 = ""https://github.com/apachecn/pytorch-doc-zh/blob/master/docs/%s"" % version\n\n    elif u_type == ""powered"":\n        if version == ""home"":\n            filename = ""node_modules/gitbook-plugin-tbfed-pagefooter/index.js""\n        else:\n            filename = ""docs/%s/node_modules/gitbook-plugin-tbfed-pagefooter/index.js"" % version\n        str1 = ""powered by Gitbook""\n        str2 = ""\xe7\x94\xb1 ApacheCN \xe5\x9b\xa2\xe9\x98\x9f\xe6\x8f\x90\xe4\xbe\x9b\xe6\x94\xaf\xe6\x8c\x81""\n\n    elif u_type == ""gitalk"":\n        if version == ""home"":\n            filename = ""node_modules/gitbook-plugin-tbfed-pagefooter/index.js""\n        else:\n            filename = ""docs/%s/node_modules/gitbook-plugin-tbfed-pagefooter/index.js"" % version\n        str1 = """"""      var str = \' \\\\n\\\\n<footer class=""page-footer"">\' + _copy +\n        \'<span class=""footer-modification"">\' +\n        _label +\n        \'\\\\n{{file.mtime | date(""\' + _format +\n        \'"")}}\\\\n</span></footer>\'""""""\n\n        str2 = """"""\n      var str = \'\\\\n\\\\n\'+\n      \'\\\\n<hr/>\'+\n      \'\\\\n<div align=""center"">\'+\n      \'\\\\n    <p><a href=""http://www.apachecn.org"" target=""_blank""><font face=""KaiTi"" size=""6"" color=""red"">\xe6\x88\x91\xe4\xbb\xac\xe4\xb8\x80\xe7\x9b\xb4\xe5\x9c\xa8\xe5\x8a\xaa\xe5\x8a\x9b</font></a></p>\'+\n      \'\\\\n    <p><a href=""https://github.com/apachecn/pytorch-doc-zh/"" target=""_blank"">apachecn/pytorch-doc-zh</a></p>\'+\n      \'\\\\n    <p><iframe align=""middle"" src=""https://ghbtns.com/github-btn.html?user=apachecn&repo=pytorch-doc-zh&type=watch&count=true&v=2"" frameborder=""0"" scrolling=""0"" width=""100px"" height=""25px""></iframe>\'+\n      \'\\\\n    <iframe align=""middle"" src=""https://ghbtns.com/github-btn.html?user=apachecn&repo=pytorch-doc-zh&type=star&count=true"" frameborder=""0"" scrolling=""0"" width=""100px"" height=""25px""></iframe>\'+\n      \'\\\\n    <iframe align=""middle"" src=""https://ghbtns.com/github-btn.html?user=apachecn&repo=pytorch-doc-zh&type=fork&count=true"" frameborder=""0"" scrolling=""0"" width=""100px"" height=""25px""></iframe>\'+\n      \'\\\\n    <a target=""_blank"" href=""//shang.qq.com/wpa/qunwpa?idkey=bcee938030cc9e1552deb3bd9617bbbf62d3ec1647e4b60d9cd6b6e8f78ddc03""><img border=""0"" src=""http://data.apachecn.org/img/logo/ApacheCN-group.png"" alt=""ML\xc2\xa0|\xc2\xa0ApacheCN"" title=""ML\xc2\xa0|\xc2\xa0ApacheCN""></a></p>\'+\n      \'\\\\n</div>\'+\n      \'\\\\n <div style=""text-align:center;margin:0 0 10.5px;"">\'+\n      \'\\\\n     <script async src=""//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js""></script>\'+\n      \'\\\\n     <ins class=""adsbygoogle""\'+\n      \'\\\\n         style=""display:inline-block;width:728px;height:90px""\'+\n      \'\\\\n         data-ad-client=""ca-pub-3565452474788507""\'+\n      \'\\\\n         data-ad-slot=""2543897000"">\'+\n      \'\\\\n     </ins>\'+\n      \'\\\\n     <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>\'+\n      \'\\\\n\'+\n      \'\\\\n    <script>\'+\n      \'\\\\n      var _hmt = _hmt || [];\'+\n      \'\\\\n      (function() {\'+\n      \'\\\\n        var hm = document.createElement(""script"");\'+\n      \'\\\\n        hm.src = ""https://hm.baidu.com/hm.js?38525fdac4b5d4403900b943d4e7dd91"";\'+\n      \'\\\\n        var s = document.getElementsByTagName(""script"")[0]; \'+\n      \'\\\\n        s.parentNode.insertBefore(hm, s);\'+\n      \'\\\\n      })();\'+\n      \'\\\\n    </script>\'+\n      \'\\\\n\'+\n      \'\\\\n    <script async src=""https://www.googletagmanager.com/gtag/js?id=UA-102475051-10""></script>\'+\n      \'\\\\n    <script>\'+\n      \'\\\\n      window.dataLayer = window.dataLayer || [];\'+\n      \'\\\\n      function gtag(){dataLayer.push(arguments);}\'+\n      \'\\\\n      gtag(\\\\\'js\\\\\', new Date());\'+\n      \'\\\\n\'+\n      \'\\\\n      gtag(\\\\\'config\\\\\', \\\\\'UA-102475051-10\\\\\');\'+\n      \'\\\\n    </script>\'+\n     \'\\\\n</div>\'+\n      \'\\\\n\'+\n      \'\\\\n<meta name=""google-site-verification"" content=""pyo9N70ZWyh8JB43bIu633mhxesJ1IcwWCZlM3jUfFo"" />\'+\n      \'\\\\n<iframe src=""https://www.bilibili.com/read/cv2710377"" style=""display:none""></iframe>\'+ \n      \'\\\\n<img src=""http://t.cn/AiCoDHwb"" hidden=""hidden"" />\'\n\n      str += \'\\\\n\\\\n\'+\n      \'\\\\n<div>\'+\n      \'\\\\n    <link rel=""stylesheet"" href=""https://unpkg.com/gitalk/dist/gitalk.css"">\'+\n      \'\\\\n    <script src=""https://unpkg.com/gitalk/dist/gitalk.min.js""></script>\'+\n      \'\\\\n    <script src=""https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js""></script>\'+\n      \'\\\\n    <div id=""gitalk-container""></div>\'+\n      \'\\\\n    <script type=""text/javascript"">\'+\n      \'\\\\n        const gitalk = new Gitalk({\'+\n      \'\\\\n        clientID: \\\\\'2e62dee5b9896e2eede6\\\\\',\'+\n      \'\\\\n        clientSecret: \\\\\'ca6819a54656af0d87960af15315320f8a628a53\\\\\',\'+\n      \'\\\\n        repo: \\\\\'pytorch-doc-zh\\\\\',\'+\n      \'\\\\n        owner: \\\\\'apachecn\\\\\',\'+\n      \'\\\\n        admin: [\\\\\'jiangzhonglian\\\\\', \\\\\'wizardforcel\\\\\'],\'+\n      \'\\\\n        id: md5(location.pathname),\'+\n      \'\\\\n        distractionFreeMode: false\'+\n      \'\\\\n        })\'+\n      \'\\\\n        gitalk.render(\\\\\'gitalk-container\\\\\')\'+\n      \'\\\\n    </script>\'+\n      \'\\\\n</div>\'\n\n      str += \'\\\\n\\\\n<footer class=""page-footer"">\' + _copy + \'<span class=""footer-modification"">\' + _label + \'\\\\n{{file.mtime | date(""\' + _format + \'"")}}\\\\n</span></footer>\'\n        """"""\n\n    # \xe7\x8a\xb6\xe6\x80\x81\xe4\xb8\xba True \xe5\xb0\xb1\xe8\xbf\x9b\xe8\xa1\x8c\xe6\x9b\xbf\xe6\x8d\xa2\n    if tag: format_file(filename, str1, str2)\n'"
