file_path,api_count,code
genpdf/__init__.py,0,b''
genpdf/__main__.py,0,"b'""""""\nTo run:\nInstall requirements using `pip install -r requirements.txt`, then:\n 1. Open root directory in terminal\n 2. Run command `python -m genpdf`\n""""""\n\nimport re\nfrom pathlib import Path\n\nfrom markdown2 import Markdown\nfrom weasyprint import HTML\n\nTHIS_DIR = Path(__file__).parent.resolve()\nPROJECT_ROOT_DIR = THIS_DIR.parent\nOUTPUT_FILENAME = PROJECT_ROOT_DIR / \'First-Steps-Towards-Deep-Learning.pdf\'\nCSS_FILENAME = THIS_DIR / \'assets/css/pdf.css\'\n\ndef replace_images(html):\n    html = re.sub(\'https://github.com/.*/blob/master\', PROJECT_ROOT_DIR.as_uri(), html)\n    return html\n\n\ndef get_cover_image():\n    images = PROJECT_ROOT_DIR.glob(\'images/*.png\')\n    cover_img = None\n    for im in images:\n        if \'cover\' in im.name.lower():\n            cover_img = im.as_uri()\n            return f\'<img src=""{cover_img}"">\'\n\n\ndef main():\n    chapter_folders = [d for d in PROJECT_ROOT_DIR.iterdir() if d.is_dir() and d.name.lower().startswith(\'chapter\')]\n    chapter_folders.sort()\n    csstyle = \'<link rel=""stylesheet"" type=""text/css"" href=""genpdf/assets/css/pdf.css"">\'\n    pretag = \'\\n<p style=""page-break-before: always"" >\\n\'\n    endtag = \'\\n</p>\\n\'\n    markdowner = Markdown(extras=[\'fenced-code-blocks\'])\n    cover = get_cover_image()\n    all_html = [cover] if cover else []\n    all_html.append(csstyle)\n    for fold in chapter_folders:\n        md = next(fold.glob(\'*.md\'))\n        with open(md, \'r\', encoding=\'utf-8\') as f:\n            content = f.read()\n            html = markdowner.convert(content)\n            html = replace_images(html)\n            all_html.append(pretag + html + endtag)\n\n    all_html = \'<script></script>\'.join(all_html)\n    HTML(string=all_html).write_pdf(OUTPUT_FILENAME, stylesheets=[CSS_FILENAME])\n    print(""Successfully cooked the book!"")\n\nif __name__ == \'__main__\':\n    main()\n'"
